spweb.utils=function(){return{getQueryParameter:function(b,a){var a=a||window.location.search,b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),c=RegExp("[\\?&]"+b+"=([^&#]*)").exec(a);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))},redirect:function(b){window.location.href=b},getRandomInt:function(b,a){return Math.floor(Math.random()*(a-b+1))+b},asyncLoadJs:function(b,a){var a="function"===typeof a?a:!1,c=c||window.document,d=c.createElement("script"),c=c.getElementsByTagName("script")[0];
d.async="async";d.src=b;d.onload=d.onreadystatechange=function(){if(d.readyState){if("loaded"==d.readyState||"complete"==d.readyState)d.onreadystatechange=null,a&&a()}else a&&a()};c.parentNode.insertBefore(d,c)},inherit:function(b,a){function c(){}c.prototype=a.prototype;b.prototype=new c;b.prototype.constructor=b},shuffle:function(b){var a,c,d;for(a=b.length-1;0<a;a--)c=Math.floor(Math.random()*(a+1)),d=b[a],b[a]=b[c],b[c]=d;return b}}}();

spweb.cookie=function(){return{set:function(a){var d=a.name,c,b;c="undefined"===typeof a.value?"":a.value;"undefined"!==typeof a.expires?(b=new Date,b.setTime(b.getTime()+864E5*a.expires),b="; expires="+b.toGMTString()):b="";window.document.cookie=d+"="+c+b+("undefined"!=typeof a.domain&&null!==a.domain?"; domain="+a.domain:"")+"; path=/"},get:function(a){var a=a+"=",d=window.document.cookie.split(";"),c;for(c=0;c<d.length;c+=1){for(var b=d[c];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(a))return b.substring(a.length,
b.length)}return null},remove:function(a){this.set({name:a})}}}();

spweb.environment=function(b){var a=null;return{getStaticUrl:function(){null===a&&(a=b("#spweb").data("static-url"));return a}}}(jQuery);

spweb.marketpicker=function(b,f){return{marketPicker:null,marketList:null,markets:null,_marketsClickHandler:function(a){a.preventDefault();var c=b(a.currentTarget).attr("href"),g=b(a.currentTarget).attr("rel"),e=null,d=window.location.href.match(/spotify\.(com|net)/);null!=d&&0<d.length&&(e=d[0]);f.set({name:"spotify_market",value:g,expires:180,domain:e});window.location.href!==c&&(a.stopPropagation(),spweb.utils.redirect(c))},init:function(){this.marketPicker=b("#js-market-picker");this.marketList=
b("#js-market-picker-list");this.markets=b(".js-market-picker-link");spweb.ui.adapt("screen and (max-width: 767px)",b.proxy(this.handleMql,this),b.proxy(this.handleResize,this));this.markets.bind("click",this._marketsClickHandler)},handleMql:function(a){a.matches&&b("body").hasClass("reboot")?this.mobify():this.desktopify()},handleResize:function(){767>(window.innerWidth||document.documentElement.clientWidth)&&b("body").hasClass("reboot")?this.mobify():this.desktopify()},mobify:function(){var a=this;
a.marketList.removeClass("popover popover-up");a.marketPicker.unbind().bind("click",function(b){a.toggleVisibility(b,"mobile")})},desktopify:function(){var a=this;a.marketList.addClass("popover popover-up").css("overflow","");a.marketPicker.unbind().bind("click",function(b){a.toggleVisibility(b,"desktop")})},toggleVisibility:function(a,c){b(a.target).hasClass("market-picker-all")||(a.preventDefault(),"mobile"===c?(this.marketList.slideToggle(),b("html, body").animate({scrollTop:this.marketList.offset().top})):
this.marketList.fadeToggle(100))}}}(jQuery,spweb.cookie);

spweb.fb=function(e){return{fbStatus:{DISCONNECTED:"disconnected",CONNECTED:"connected",NOT_AUTHORIZED:"not-authorized",ERROR:"error"},options:{appId:spweb.config.facebook.appId,cookie:!0,status:!1,xfbml:!0,oauth:!0},self:this,api:null,status:"disconnected",authResponse:null,connectionTimeout:1E4,notificationTimeout:1500,connectionTimerId:null,notificationTimerId:null,initFacebookAPI:function(a,b,c){this.api=window.FB;e.extend(this.options,a);this.api.init(this.options);this.verifyConnection(b,c)},
verifyConnection:function(a,b){this.api.getLoginStatus(function(c){spweb.fb.checkFbLoginResponse(c,a,b)},!0)},storeAuthResponse:function(a){"undefined"!==typeof a.authResponse&&(this.authResponse=a.authResponse)},checkFbLoginResponse:function(a,b,c){switch(a.status){case "connected":this.status=this.fbStatus.CONNECTED;this.storeAuthResponse(a);b&&b(a);break;case "not_authorized":this.status=this.fbStatus.NOT_AUTHORIZED;c&&c(a);break;default:this.status=this.fbStatus.DISCONNECTED,c&&c(a)}},checkAppStatus:function(){this.connectionTimerId&&
(clearTimeout(this.connectionTimerId),this.connectionTimerId=null);this.notificationTimerId&&(clearTimeout(this.notificationTimerId),this.notificationTimerId=null)},parseFbResponse:function(a){var b={status:"failure",message:""};"undefined"!=typeof a.error_msg?b.message=a.error_msg:(b.status="success",b.message=a);return b},getAuthResponse:function(){return this.authResponse},loadFacebookScript:function(){window.spyASL||(window.spyASL=function(a){setTimeout(function(){var b=document.createElement("script");
b.type="text/javascript";b.async=!0;b.src=a;document.getElementsByTagName("head")[0].appendChild(b)},1)});window.FB||window.spyASL("//connect.facebook.net/"+spweb.config.facebook.locale+"/all.js")},connect:function(a){this.api?this.verifyConnection(a,a):(window.fbAsyncInit=function(){spweb.fb.initFacebookAPI(a,a)},this.loadFacebookScript())},getApi:function(){if(this.api)return this.api;throw Error("FB API not initialized");},login:function(a,b,c){this.api?this.getApi().login(function(c){spweb.fb.checkFbLoginResponse(c,
a,b)},c):this.initFacebookAPI()},autoLogin:function(a,b,c){spweb.fb.api.getLoginStatus(function(d){"connected"===d.status?e.ajax({type:"POST",dataType:"html",url:"/"+spweb.user.getMarket()+"/xhr/html/fb-login.php",data:e.extend(a,{fb:d.authResponse.accessToken,id:d.authResponse.userID}),xhrFields:{withCredentials:!0},success:function(a,c){b(a,c)}}):c(d)})},getStatus:function(){return status},getGDPURL:function(a,b){var c;c="https://www.facebook.com/connect/uiserver.php?method=permissions.request&app_id="+
this.app_id;c+="&perms=publish_actions,email,user_birthday&display=popup&locale="+spweb.config.facebook.locale+"&redirect_uri=";c+=encodeURIComponent(a)+"&cancel_url=";c+=encodeURIComponent(b);return c+"&height=365&width=612&fbconnect=1&TB_iframe=true&modal=true"},getConnectURL:function(a,b){var c=this.app_id,d=encodeURIComponent(this.getGDPURL(a,b));encodeURIComponent(a);b=encodeURIComponent(b);return"https://www.facebook.com/login.php?api_key="+c+"&skip_api_login=1&display=dialog&cancel_url="+b+
"&fbconnect=1&next="+d+"&rcount=1"}}}(jQuery);

(function(c){c.extend(c.fn,{validate:function(a){if(this.length){var b=c.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new c.validator(a,this[0]);c.data(this[0],"validator",b);b.settings.onsubmit&&(this.validateDelegate(":submit","click",function(a){b.settings.submitHandler&&(b.submitButton=a.target);c(a.target).hasClass("cancel")&&(b.cancelSubmit=!0);void 0!==c(a.target).attr("formnovalidate")&&(b.cancelSubmit=!0)}),this.submit(function(a){function e(){var e;return b.settings.submitHandler?
(b.submitButton&&(e=c("<input type='hidden'/>").attr("name",b.submitButton.name).val(c(b.submitButton).val()).appendTo(b.currentForm)),b.settings.submitHandler.call(b,b.currentForm,a),b.submitButton&&e.remove(),!1):!0}b.settings.debug&&a.preventDefault();if(b.cancelSubmit)return b.cancelSubmit=!1,e();if(b.form())return b.pendingRequest?(b.formSubmitted=!0,!1):e();b.focusInvalid();return!1}));return b}a&&(a.debug&&window.console)&&console.warn("Nothing selected, can't validate, returning nothing.")},
valid:function(){if(c(this[0]).is("form"))return this.validate().form();var a=!0,b=c(this[0].form).validate();this.each(function(){a=a&&b.element(this)});return a},removeAttrs:function(a){var b={},d=this;c.each(a.split(/\s/),function(a,c){b[c]=d.attr(c);d.removeAttr(c)});return b},rules:function(a,b){var d=this[0];if(a){var e=c.data(d.form,"validator").settings,f=e.rules,g=c.validator.staticRules(d);switch(a){case "add":c.extend(g,c.validator.normalizeRule(b));delete g.messages;f[d.name]=g;b.messages&&
(e.messages[d.name]=c.extend(e.messages[d.name],b.messages));break;case "remove":if(!b)return delete f[d.name],g;var h={};c.each(b.split(/\s/),function(a,b){h[b]=g[b];delete g[b]});return h}}d=c.validator.normalizeRules(c.extend({},c.validator.classRules(d),c.validator.attributeRules(d),c.validator.dataRules(d),c.validator.staticRules(d)),d);d.required&&(e=d.required,delete d.required,d=c.extend({required:e},d));return d}});c.extend(c.expr[":"],{blank:function(a){return!c.trim(""+c(a).val())},filled:function(a){return!!c.trim(""+
c(a).val())},unchecked:function(a){return!c(a).prop("checked")}});c.validator=function(a,b){this.settings=c.extend(!0,{},c.validator.defaults,a);this.currentForm=b;this.init()};c.validator.format=function(a,b){if(1===arguments.length)return function(){var b=c.makeArray(arguments);b.unshift(a);return c.validator.format.apply(this,b)};2<arguments.length&&b.constructor!==Array&&(b=c.makeArray(arguments).slice(1));b.constructor!==Array&&(b=[b]);c.each(b,function(b,c){a=a.replace(RegExp("\\{"+b+"\\}",
"g"),function(){return c})});return a};c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},
onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a,b){9===b.which&&""===this.elementValue(a)||(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).addClass(b).removeClass(d):c(a).addClass(b).removeClass(d)},unhighlight:function(a,
b,d){"radio"===a.type?this.findByName(a.name).removeClass(b).addClass(d):c(a).removeClass(b).addClass(d)}},setDefaults:function(a){c.extend(c.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",
equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},
autoCreateRanges:!1,prototype:{init:function(){function a(a){var b=c.data(this[0].form,"validator"),d="on"+a.type.replace(/^validate/,"");b.settings[d]&&b.settings[d].call(b,this[0],a)}this.labelContainer=c(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm);this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid=
{};this.reset();var b=this.groups={};c.each(this.settings.groups,function(a,d){"string"===typeof d&&(d=d.split(/\s/));c.each(d,function(c,d){b[d]=a})});var d=this.settings.rules;c.each(d,function(a,b){d[a]=c.validator.normalizeRule(b)});c(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",a);this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();c.extend(this.submitted,this.errorMap);this.invalid=c.extend({},this.errorMap);this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=
this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=c(a);var b=!1!==this.check(a);b?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return b},showErrors:function(a){if(a){c.extend(this.errorMap,a);this.errorList=[];for(var b in a)this.errorList.push({message:a[b],element:this.findByName(b)[0]});
this.successList=c.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=
0,c;for(c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1===c.grep(this.errorList,function(b){return b.element.name===a.name}).length&&
a},elements:function(){var a=this,b={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&(a.settings.debug&&window.console)&&console.error("%o has no name assigned",this);return this.name in b||!a.objectLength(c(this).rules())?!1:b[this.name]=!0})},clean:function(a){return c(a)[0]},errors:function(){var a=this.settings.errorClass.replace(" ",".");return c(this.settings.errorElement+"."+a,this.errorContext)},
reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=c([]);this.toHide=c([]);this.currentElements=c([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(a){var b=c(a).attr("type"),d=c(a).val();return"radio"===b||"checkbox"===b?c("input[name='"+c(a).attr("name")+"']:checked").val():"string"===typeof d?d.replace(/\r/g,""):d},check:function(a){var a=
this.validationTargetFor(this.clean(a)),b=c(a).rules(),d=!1,e=this.elementValue(a),f,g;for(g in b){var h={method:g,parameters:b[g]};try{if(f=c.validator.methods[g].call(this,e,a,h.parameters),"dependency-mismatch"===f)d=!0;else{d=!1;if("pending"===f){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!f)return this.formatAndAdd(a,h),!1}}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+a.id+", check the '"+h.method+"' method.",j),j;}}if(!d)return this.objectLength(b)&&
this.successList.push(a),!0},customDataMessage:function(a,b){return c(a).data("msg-"+b.toLowerCase())||a.attributes&&c(a).attr("data-msg-"+b.toLowerCase())},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,b){return this.findDefined(this.customMessage(a.name,b),this.customDataMessage(a,b),!this.settings.ignoreTitle&&
a.title||void 0,c.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),e=/\$?\{(\d+)\}/g;"function"===typeof d?d=d.call(this,b.parameters,a):e.test(d)&&(d=c.validator.format(d.replace(e,"{$1}"),b.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){var a,
b;for(a=0;this.errorList[a];a++)b=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message);this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,
this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(a,b){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.html(b)):(d=c("<"+this.settings.errorElement+">").attr("for",this.idOrName(a)).addClass(this.settings.errorClass).html(b||
""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,c(a)):d.insertAfter(a)));!b&&this.settings.success&&(d.text(""),"string"===typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d,a));this.toShow=this.toShow.add(d)},errorsFor:function(a){var b=this.idOrName(a);return this.errors().filter(function(){return c(this).attr("for")===
b})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){return c(this.currentForm).find("[name='"+a+"']")},getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return c("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},
depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(a,b){return!!c(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){var b=this.elementValue(a);return!c.validator.methods.required.call(this,b,a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,b){this.pendingRequest--;0>this.pendingRequest&&
(this.pendingRequest=0);delete this.pending[a.name];b&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!b&&(0===this.pendingRequest&&this.formSubmitted)&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(a){return c.data(a,"previousValue")||c.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},
url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,b){a.constructor===String?this.classRuleSettings[a]=b:c.extend(this.classRuleSettings,a)},classRules:function(a){var b={};(a=c(a).attr("class"))&&c.each(a.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(b,c.validator.classRuleSettings[this])});return b},attributeRules:function(a){var b={},a=c(a),d=a[0].getAttribute("type"),e;for(e in c.validator.methods){var f;
"required"===e?(f=a.get(0).getAttribute(e),""===f&&(f=!0),f=!!f):f=a.attr(e);if(/min|max/.test(e)&&(null===d||/number|range|text/.test(d)))f=Number(f);f?b[e]=f:d===e&&"range"!==d&&(b[e]=!0)}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},dataRules:function(a){var b,d={},e=c(a);for(b in c.validator.methods)a=e.data("rule-"+b.toLowerCase()),void 0!==a&&(d[b]=a);return d},staticRules:function(a){var b={},d=c.data(a.form,"validator");d.settings.rules&&(b=c.validator.normalizeRule(d.settings.rules[a.name])||
{});return b},normalizeRules:function(a,b){c.each(a,function(d,e){if(!1===e)delete a[d];else if(e.param||e.depends){var f=!0;switch(typeof e.depends){case "string":f=!!c(e.depends,b.form).length;break;case "function":f=e.depends.call(b,b)}f?a[d]=void 0!==e.param?e.param:!0:delete a[d]}});c.each(a,function(d,e){a[d]=c.isFunction(e)?e(b):e});c.each(["minlength","maxlength"],function(){a[this]&&(a[this]=Number(a[this]))});c.each(["rangelength","range"],function(){var b;a[this]&&(c.isArray(a[this])?a[this]=
[Number(a[this][0]),Number(a[this][1])]:"string"===typeof a[this]&&(b=a[this].split(/[\s,]+/),a[this]=[Number(b[0]),Number(b[1])]))});c.validator.autoCreateRanges&&(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));return a},normalizeRule:function(a){if("string"===typeof a){var b={};c.each(a.split(/\s/),function(){b[this]=!0});a=b}return a},addMethod:function(a,b,d){c.validator.methods[a]=
b;c.validator.messages[a]=void 0!==d?d:c.validator.messages[a];3>b.length&&c.validator.addClassRules(a,c.validator.normalizeRule(a))},methods:{required:function(a,b,d){return!this.depend(d,b)?"dependency-mismatch":"select"===b.nodeName.toLowerCase()?(a=c(b).val())&&0<a.length:this.checkable(b)?0<this.getLength(a,b):0<c.trim(a).length},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;for(var c=0,e=0,f=!1,a=a.replace(/\D/g,""),g=a.length-
1;0<=g;g--){e=a.charAt(g);e=parseInt(e,10);if(f&&9<(e*=2))e-=9;c+=e;f=!f}return 0===c%10},minlength:function(a,b,d){a=c.isArray(a)?a.length:this.getLength(c.trim(a),b);return this.optional(b)||a>=d},maxlength:function(a,b,d){a=c.isArray(a)?a.length:this.getLength(c.trim(a),b);return this.optional(b)||a<=d},rangelength:function(a,b,d){a=c.isArray(a)?a.length:this.getLength(c.trim(a),b);return this.optional(b)||a>=d[0]&&a<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||
a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},equalTo:function(a,b,d){d=c(d);this.settings.onfocusout&&d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(b).valid()});return a===d.val()},remote:function(a,b,d){if(this.optional(b))return"dependency-mismatch";var e=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});e.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=e.message;
d="string"===typeof d&&{url:d}||d;if(e.old===a)return e.valid;e.old=a;var f=this;this.startRequest(b);var g={};g[b.name]=a;c.ajax(c.extend(!0,{url:d,mode:"abort",port:"validate"+b.name,dataType:"json",data:g,success:function(d){f.settings.messages[b.name].remote=e.originalMessage;var g=!0===d||"true"===d;if(g){var i=f.formSubmitted;f.prepareElement(b);f.formSubmitted=i;f.successList.push(b);delete f.invalid[b.name];f.showErrors()}else i={},d=d||f.defaultMessage(b,"remote"),i[b.name]=e.message=c.isFunction(d)?
d(a):d,f.invalid[b.name]=!0,f.showErrors(i);e.valid=g;f.stopRequest(b,g)}},d));return"pending"}}});c.format=c.validator.format})(jQuery);(function(c){var a={};if(c.ajaxPrefilter)c.ajaxPrefilter(function(b,c,f){c=b.port;"abort"===b.mode&&(a[c]&&a[c].abort(),a[c]=f)});else{var b=c.ajax;c.ajax=function(d){var e=("port"in d?d:c.ajaxSettings).port;return"abort"===("mode"in d?d:c.ajaxSettings).mode?(a[e]&&a[e].abort(),a[e]=b.apply(this,arguments),a[e]):b.apply(this,arguments)}}})(jQuery);
(function(c){c.extend(c.fn,{validateDelegate:function(a,b,d){return this.bind(b,function(b){var f=c(b.target);if(f.is(a))return d.apply(f,arguments)})}})})(jQuery);

jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,a,c,b,d){return jQuery.easing[jQuery.easing.def](e,a,c,b,d)},easeInQuad:function(e,a,c,b,d){return b*(a/=d)*a+c},easeOutQuad:function(e,a,c,b,d){return-b*(a/=d)*(a-2)+c},easeInOutQuad:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a+c:-b/2*(--a*(a-2)-1)+c},easeInCubic:function(e,a,c,b,d){return b*(a/=d)*a*a+c},easeOutCubic:function(e,a,c,b,d){return b*((a=a/d-1)*a*a+1)+c},easeInOutCubic:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a+c:
b/2*((a-=2)*a*a+2)+c},easeInQuart:function(e,a,c,b,d){return b*(a/=d)*a*a*a+c},easeOutQuart:function(e,a,c,b,d){return-b*((a=a/d-1)*a*a*a-1)+c},easeInOutQuart:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a+c:-b/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(e,a,c,b,d){return b*(a/=d)*a*a*a*a+c},easeOutQuint:function(e,a,c,b,d){return b*((a=a/d-1)*a*a*a*a+1)+c},easeInOutQuint:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a*a+c:b/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(e,a,c,b,d){return-b*Math.cos(a/
d*(Math.PI/2))+b+c},easeOutSine:function(e,a,c,b,d){return b*Math.sin(a/d*(Math.PI/2))+c},easeInOutSine:function(e,a,c,b,d){return-b/2*(Math.cos(Math.PI*a/d)-1)+c},easeInExpo:function(e,a,c,b,d){return 0==a?c:b*Math.pow(2,10*(a/d-1))+c},easeOutExpo:function(e,a,c,b,d){return a==d?c+b:b*(-Math.pow(2,-10*a/d)+1)+c},easeInOutExpo:function(e,a,c,b,d){return 0==a?c:a==d?c+b:1>(a/=d/2)?b/2*Math.pow(2,10*(a-1))+c:b/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(e,a,c,b,d){return-b*(Math.sqrt(1-(a/=d)*
a)-1)+c},easeOutCirc:function(e,a,c,b,d){return b*Math.sqrt(1-(a=a/d-1)*a)+c},easeInOutCirc:function(e,a,c,b,d){return 1>(a/=d/2)?-b/2*(Math.sqrt(1-a*a)-1)+c:b/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(e,a,c,b,d){var e=1.70158,f=0,g=b;if(0==a)return c;if(1==(a/=d))return c+b;f||(f=0.3*d);g<Math.abs(b)?(g=b,e=f/4):e=f/(2*Math.PI)*Math.asin(b/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f))+c},easeOutElastic:function(e,a,c,b,d){var e=1.70158,f=0,g=b;if(0==a)return c;if(1==
(a/=d))return c+b;f||(f=0.3*d);g<Math.abs(b)?(g=b,e=f/4):e=f/(2*Math.PI)*Math.asin(b/g);return g*Math.pow(2,-10*a)*Math.sin((a*d-e)*2*Math.PI/f)+b+c},easeInOutElastic:function(e,a,c,b,d){var e=1.70158,f=0,g=b;if(0==a)return c;if(2==(a/=d/2))return c+b;f||(f=d*0.3*1.5);g<Math.abs(b)?(g=b,e=f/4):e=f/(2*Math.PI)*Math.asin(b/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f)+c:0.5*g*Math.pow(2,-10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f)+b+c},easeInBack:function(e,a,c,b,d,f){void 0==
f&&(f=1.70158);return b*(a/=d)*a*((f+1)*a-f)+c},easeOutBack:function(e,a,c,b,d,f){void 0==f&&(f=1.70158);return b*((a=a/d-1)*a*((f+1)*a+f)+1)+c},easeInOutBack:function(e,a,c,b,d,f){void 0==f&&(f=1.70158);return 1>(a/=d/2)?b/2*a*a*(((f*=1.525)+1)*a-f)+c:b/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+c},easeInBounce:function(e,a,c,b,d){return b-jQuery.easing.easeOutBounce(e,d-a,0,b,d)+c},easeOutBounce:function(e,a,c,b,d){return(a/=d)<1/2.75?b*7.5625*a*a+c:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?
b*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(e,a,c,b,d){return a<d/2?0.5*jQuery.easing.easeInBounce(e,2*a,0,b,d)+c:0.5*jQuery.easing.easeOutBounce(e,2*a-d,0,b,d)+0.5*b+c}});

(function(b){var a=b({});b.subscribe=function(){a.on.apply(a,arguments)};b.unsubscribe=function(){a.off.apply(a,arguments)};b.publish=function(){a.trigger.apply(a,arguments)}})(jQuery);

(function(d){d.fn.spwebScroller=function(e){var b=d.extend({center:!1,duration:1E3,easing:"easeInOutCubic",offset:0,windowClipBy:0},e);if(!e||!e.offset)b.offset=b.windowClipBy;return this.off("click.scroller").on("click.scroller",function(a){a.preventDefault();var a=d("#"+d(this).attr("href").split("#")[1]),c=0;if(0<a.length)var c=a.offset(),e=d(window).height()-b.windowClipBy,a=a.outerHeight(),c=b.center&&a<e?c.top-(e-a)/2:c.top,c=c-b.offset;d("html, body").animate({scrollTop:c},b.duration,b.easing)})}})(jQuery);

spweb.Form=function(a){this.form=a};
spweb.Form.prototype.init=function(a){var b=this,a=a||{};this.validationOptions=jQuery.extend({submitHandler:function(){var a=b.form;b.showAjaxSpinner();jQuery.ajax({data:a.serialize(),dataType:"json",success:function(a){b.hideAjaxSpinner();$.publish("form_success."+b.form.attr("id"),a)},error:function(){b.hideAjaxSpinner();$.publish("form_error."+b.form.attr("id"))},type:a.attr("method"),url:a.attr("action")})},errorClass:"has-error"},a);this._setupValidation();this._initPolyfills();this._insertAjaxSpinner()};
spweb.Form.prototype._setupValidation=function(){this.validator=this.form.validate(this.validationOptions)};spweb.Form.prototype._initPolyfills=function(){if(!Modernizr.input.placeholder){var a=function(){jQuery("input[placeholder]").placeholder()};"undefined"!==typeof jQuery.fn.placeholder?a():spweb.utils.asyncLoadJs(spweb.environment.getStaticUrl()+"/js/jquery.placeholder.min.js",a)}};spweb.Form.prototype.resetForm=function(){this.validator.resetForm()};
spweb.Form.prototype._insertAjaxSpinner=function(){var a=jQuery("<div></div>");a.addClass("is-hidden ajax-spinner");this.form.prepend(a);this.ajaxSpinner=a};spweb.Form.prototype.showAjaxSpinner=function(){this.ajaxSpinner.removeClass("is-hidden")};spweb.Form.prototype.hideAjaxSpinner=function(){this.ajaxSpinner.addClass("is-hidden")};spweb.Form.prototype.showGeneralError=function(a){var b=this.form.find(".js-general-error");if(b.length&&(a||b.data("error")))b.html(a?a:b.data("error")).removeClass("is-hidden")};
spweb.Form.prototype.hideGeneralError=function(){var a=this.form.find(".js-general-error");a.length&&a.addClass("is-hidden")};

spweb.ui=function(b,h){return{downloadLinks:"",osPlaceholders:"",headerMain:null,init:function(){var a=spweb.ui.isMobilePage();this.downloadLinks=b(".js-button-download");this.osPlaceholders=b(".js-os");this.headerMain=b("#js-header-main");a||(this.setElementHeight(b(".js-fullheight"),b(window).height()),b(window).bind("resize.ui",function(){spweb.ui.setElementHeight(b(".js-fullheight"),b(window).height())}),this.setElementHeight(b(".js-two-thirds-window"),b(window).height()*(2/3)),b(window).bind("resize.ui",
function(){spweb.ui.setElementHeight(b(".js-two-thirds-window"),b(window).height()*(2/3))}));0<this.downloadLinks.length&&this.updateDownloadLinks();0<this.osPlaceholders.length&&this.updateOsPlaceholders();this.updateLazyloadBackgrounds(b(".bg-lazyload"));this.message.init();this.nav.init()},isMobilePage:function(){return 767>window.screen.width},applyCss:function(a,b,c){var e=[],d=(c.x||0)|0,f=(c.y||0)|0;if(0!=d||0!=f)e=b.csstransforms3d?e.concat(["-webkit-transform: translate3d("+d+"px, "+f+"px, 0)",
"-moz-transform: translate3d("+d+"px, "+f+"px, 0)","-o-transform: translate3d("+d+"px, "+f+"px, 0)","-ms-transform: translate3d("+d+"px, "+f+"px, 0)"]):b.csstransforms?e.concat(["-webkit-transform: translateX("+d+"px) translateY("+f+"px)","-moz-transform: translateX("+d+"px) translateY("+f+"px)","-o-transform: translateX("+d+"px) translateY("+f+"px)","-ms-transform: translateX("+d+"px) translateY("+f+"px)"]):e.concat(["position: absolute","left: "+d+"px","top: "+f+"px"]);c.backgroundImageUrl&&e.push('background-image: url("'+
c.backgroundImageUrl+'")');c.width&&e.push("width: "+(c.width|0)+"px");c.height&&e.push("height: "+(c.height|0)+"px");c.visibility&&e.push("visibility: "+c.visibility);a.style.cssText=e.join(";")},applyCssGetSupportedFeatures:function(){return window.Modernizr?{csstransforms3d:Modernizr.csstransforms3d,csstransforms:Modernizr.csstransforms}:{csstransforms3d:!1,csstransforms:!1}},updateDownloadLinks:function(){this.downloadLinks.each(function(){var a=b(this).attr("href");b(this).attr("href",spweb.download.getDownloadPageURI(a))})},
updateOsPlaceholders:function(){this.osPlaceholders.text(spweb.user.getOs())},setElementHeight:function(a,g){a.each(function(){b(this).css("height",g)})},handleNoBackgroundSize:function(a,b){a.backstretch(spweb.environment.getStaticUrl()+b,{fade:250})},updateLazyloadBackgrounds:function(a){a.each(function(){var a=b(this),c="url("+spweb.environment.getStaticUrl()+b(this).attr("data-bg-image")+")";a.css("backgroundImage",c)})},message:{element:null,close:null,name:null,signupForm:null,backendErrorContainer:null,
init:function(){var a=spweb.ui.message;a.element=b("#js-message-notice");a.close=a.element.find(".close");a.name=a.element.data("name");a.signupForm=a.element.find("#js-email-form");a.backendErrorContainer=a.element.find(".backend-error");if(h.get(a.name))a.remove();else if(a.element.addClass("is-visible"),a.close.bind("click.ui",a.remove),null!==a.signupForm){var g=new spweb.Form(a.signupForm);g.onAjaxSubmitSuccess=function(c){a.backendErrorContainer.text(c.message).parent().css("display","block");
"ok"===c.status&&(h.set({name:"int-email",value:"1"}),setTimeout(function(){b("#js-message-notice").slideUp()},5E3))};g.init({errorLabelContainer:"#js-email-error",showErrors:function(){a.backendErrorContainer.text("");g.validator.defaultShowErrors()}})}},remove:function(){var a=spweb.ui.message;h.set({name:a.name,value:"1"});a.element.remove()}},nav:{navWrap:null,headerNav:null,navList:null,toggleNav:null,toggleIcon:null,accountWidget:null,accountList:null,avatarLink:null,displayName:null,init:function(){this.navWrap=
b("#js-nav-wrap");this.headerNav=b("#js-nav-header");this.navList=b("#js-nav-list");this.toggleNav=b("#js-toggle-nav");this.toggleIcon=b("#js-icon-toggle-nav");this.accountWidget=b("#js-account");this.accountList=b("#js-account-list");this.avatarLink=b("#js-avatar-link");this.displayName=b("#js-display-name");spweb.ui.adapt("screen and (max-width: 767px)",b.proxy(this.handleMql,this),b.proxy(this.handleResize,this));spweb.fb.connect(function(){!spweb.user.isMobile()&&!(1>b(".is-loggedout").size()||
spweb.cookie.get("sp_logout"))&&spweb.fb.autoLogin({type:"nav"},function(a){a&&(a=b(a),0<a.siblings(".nav-item").length&&(b("#js-nav-list").replaceWith(a),spweb.ui.init(),setTimeout(function(){b("#js-account-list-auto").remove()},5E3),b("#js-account-list-auto").bind("click.ui",function(){b(this).remove()})))})})},handleMql:function(a){a.matches&&b("body").hasClass("reboot")?this.mobify():this.desktopify()},handleResize:function(){767>(window.innerWidth||document.documentElement.clientWidth)&&b("body").hasClass("reboot")?
this.mobify():this.desktopify()},mobify:function(){var a=this,g,c,e,d;a.accountList.hide();a.accountWidget.unbind(".ui");a.avatarLink.unbind(".ui").bind("click.ui",function(){spweb.utils.redirect(b(this).data("href"))}).append(a.displayName).prependTo(a.navWrap);a.navWrap.removeClass("is-expanded").addClass("is-collapsed");g=this.headerNav.height();c=this.toggleNav.height();e=g+c-3;d=function(b,c){Modernizr.csstransforms&&Modernizr.csstransitions?(a.headerNav.css({"-webkit-transition":"-webkit-transform "+
b,"-moz-transition":"-moz-transform "+b,"-ms-transition":"-ms-transform "+b,"-o-transition":"-o-transform "+b,transition:"transform "+b,"-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c}),a.setState()):a.headerNav.slideToggle()};a.toggleIcon.unbind(".ui").bind("click.ui",function(){d(".5s ease-in 0s, background-color .5s ease-in 0s","translateY("+e+"px)");e=-e})},desktopify:function(){var a=this;a.avatarLink.unbind(".ui");a.accountWidget.prepend(a.avatarLink,
a.displayName).unbind(".ui");a.accountWidget.hasClass("is-loggedin")&&a.accountWidget.bind("click.ui",function(b){if("js-avatar-link"===b.target.id||"js-avatar"===b.target.id||"js-display-name"===b.target.id)b.preventDefault(),a.accountList.css({top:"120%",right:"-10px"}).fadeToggle(100)});a.navWrap.removeClass("is-collapsed is-expanded");this.headerNav.attr("style","");this.toggleNav.unbind("click.ui",a.setState)},setState:function(){this.navWrap.toggleClass("is-collapsed is-expanded")}},adapt:function(a,
b,c){window.matchMedia?this._handleMatchMedia(a,b):this._handleResize(c)},_handleMatchMedia:function(a,b){var c=window.matchMedia(a),e="@media "+a+"{.mql {} }";if(null!==document.getElementById("mql-style")){var d=document.getElementById("mql-style");-1===d.textContent.indexOf(a)&&d.appendChild(document.createTextNode(e))}else d=document.createElement("style"),d.setAttribute("id","mql-style"),d.appendChild(document.createTextNode(e)),document.head.appendChild(d);c.addListener(b);b(c)},_handleResize:function(a){b(window).bind("resize.ui",
function(){a()}).trigger("resize")}}}(jQuery,spweb.cookie);

spweb.user=function(b,a,c){var d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,p={getBrowser:function(){null===d&&(d=b.browser);return d},getBrowserVersion:function(){null===e&&(e=b.version);return e},getLang:function(){null===j&&(j=c("body").attr("class").match(/l-([\w]+)/)[1]);return j},getMarket:function(){null===k&&(k=c("body").attr("class").match(/m-([\w-]+)/)[1]);return k},getOs:function(){null===l&&(l=b.OS.toLowerCase()||"other");return l},isAndroid:function(){null===
f&&(f="android"===this.getOs());return f},isiOS:function(){null===g&&(g="iphone/ipod"===this.getOs()||"ipad"===this.getOs());return g},isLoggedIn:function(){null===h&&(h=c("#js-account").hasClass("is-loggedin"));return h},isMobile:function(){null===i&&(i="iphone/ipod"===this.getOs()||"ipad"===this.getOs()||"android"===this.getOs()||"windows phone"===this.getOs());return i},supportsAudio:function(){null===m&&(m=a.audio&&(""!=a.audio.mp3||""!=a.audio.ogg)&&!p.isMobile()?!0:!1);return m},supportsVideo:function(){null===
n&&(n=a.video&&(""!=a.video.h264||""!=a.video.webm)&&!p.isMobile()?!0:!1);return n}};return p}(browserDetect,Modernizr,jQuery);

spweb.ElementCollection=function(){this.elements=[];this._currentKey=0};spweb.ElementCollection.prototype.getNextKey=function(){return this._currentKey==this.elements.length-1?0:this._currentKey+1};spweb.ElementCollection.prototype.setCurrentKey=function(a){this._currentKey=a};spweb.ElementCollection.prototype.getCurrentKey=function(){return this._currentKey};spweb.ElementCollection.prototype.incrementKey=function(){this.setCurrentKey(this.getNextKey());return this};
spweb.ElementCollection.prototype.getCurrentElement=function(){return this.getElementByKey(this.getCurrentKey())};spweb.ElementCollection.prototype.getNextElement=function(){return this.getElementByKey(this.getNextKey())};spweb.ElementCollection.prototype.getElementByKey=function(a){return this.elements[a]};spweb.ElementCollection.prototype.add=function(a){this.elements.push(a);return this};spweb.ElementCollection.prototype.isKeyInCollection=function(a){return void 0!==this.elements[a]};

spweb.register=function(d,n){var e,c,h,i,j,k,p,q,r,l,f={};j=function(a,b){if("object"!==typeof a)e.showGeneralError();else if(1!==a.status)"facebook"===b?c.showGeneralError(a.message):9<a.status&&41>a.status?e.validator.showErrors({username:a.message}):50===a.status||60===a.status?e.validator.showErrors({email:a.message}):e.showGeneralError(a.message);else{k(a.userinfo);d.publish("registration_success");var m=q(spweb.register.getForwardUrl(),a),g=r(m,a);0<g.length?d.when.apply(d,g).always(function(){window.location=
m}):window.location=m}};k=function(a){var b=window.location.hostname.split("."),b="."+b[b.length-2]+"."+b[b.length-1];spweb.cookie.set({name:"sp_userinfo",value:encodeURIComponent(JSON.stringify(a)),domain:b})};q=function(a,b){b.isValidPrelaunchSignup&&(a="/"+spweb.user.getMarket()+"/download/?prelaunch=1");!spweb.user.isMobile()&&-1<a.indexOf("download")&&(a=spweb.download.getDownloadPageURI(a));-1!==window.location.pathname.indexOf("for-music")&&("undefined"!==typeof b.new_account&&!b.new_account)&&
(a="/"+spweb.user.getMarket()+"/");spweb.register.setForwardUrl(a);return a};r=function(a,b){var c=[];if(-1<a.indexOf("webplayer")){var g=jQuery.Deferred();c.push(g);l(g)}if(b.callback_url){var e=jQuery.Deferred();c.push(e);d('<iframe height="0" width="0" style="display: none; visibility: hidden"></iframe>').attr("src",b.callback_url).appendTo("body").load(function(){e.resolve()});setTimeout(function(){e.reject()},5E3)}return c};l=function(a,b,c){c=c||0;b=!isNaN(b)?b:5;if(1>b)return a.resolve();setTimeout(function(){d.ajax({type:"POST",
dataType:"json",url:"/"+spweb.user.getMarket()+"/xhr/json/token.php",xhrFields:{withCredentials:!0},success:function(c){if("object"!==typeof c||1===c.status)return a.resolve();b-=1;l(a,b,500)}})},c)};p=function(){c.showAjaxSpinner();spweb.fb.login(function(a){spweb.fb.api.api("/me",function(b){if(!b||b.error)c.hideAjaxSpinner(),c.showGeneralError();else{var e="";b&&b.name&&(e=b.name);d.ajax({type:"POST",dataType:"json",url:"/"+spweb.user.getMarket()+"/xhr/json/sign-up-for-spotify-fb.php",xhrFields:{withCredentials:!0},
data:{fb:a.authResponse.accessToken,id:a.authResponse.userID,name:e,creation_flow:i,terms:"true"},success:function(a){c.hideAjaxSpinner();"object"===typeof a&&1===a.status?(k(a.userinfo),d.publish("form_success."+c.form.attr("id"),a)):c.showGeneralError()},error:function(){c.hideAjaxSpinner();c.showGeneralError()}})}})},function(){c.hideAjaxSpinner();c.showGeneralError()},{scope:"email,publish_actions,user_birthday"})};f.init=function(){h=d("#register-forward-url").val();c=new n(d("#js-register-with-facebook"));
d.subscribe("form_success."+c.form.attr("id"),function(a,b){j(b,"facebook")});d.subscribe("form_error."+c.form.attr("id"),function(){c.showGeneralError()});c.init({submitHandler:p,errorClass:"has-error",errorPlacement:function(a,b){a.appendTo(b.closest("li"))}});e=new n(d("#js-register-with-email"));d.subscribe("form_success."+e.form.attr("id"),function(a,b){j(b,"email")});d.subscribe("form_error."+e.form.attr("id"),function(){e.showGeneralError()});e.init({groups:{dob:"dob_month dob_day dob_year"},
errorPlacement:function(a,b){a.appendTo(b.closest("li"))}});d(".js-signup-fb").bind("click.signUp",function(a){a.preventDefault();a.stopPropagation();c.form.submit()});this.init=Function("")};f.getForwardUrl=function(){return h};f.setForwardUrl=function(a){h=a};f.getCreationFlow=function(){return i};f.setCreationFlow=function(a){a="string"===typeof a?a:"";e.form.find("#creation_flow").val(a);i=a};f.copyTermsField=function(){d("#register-terms").prop("checked",d("#register-terms-facebook").prop("checked"))};
return f}(jQuery,spweb.Form);

spweb.login=function(c,h,j){var b,e,i,f,g={};i=function(a){if("object"!==typeof a)b.showGeneralError();else if(""!==a.msg)b.showGeneralError(a.msg);else{a.isPrelaunchLoginAttempt&&spweb.login.setForwardUrl("/"+spweb.user.getMarket()+"/coming-soon/");var d=window.location.hostname.split("."),d="."+d[d.length-2]+"."+d[d.length-1];spweb.cookie.set({name:"sp_userinfo",value:encodeURIComponent(JSON.stringify(a.userinfo)),domain:d});window.location.href="oauth_redirect"in a?a.oauth_redirect:spweb.login.getForwardUrl()}};
g.init=function(){f=c("#login-forward-url").val();e=new h(c("#js-login-form-facebook"));e.init();b=new h(c("#js-login-form-email"));c.subscribe("form_success."+b.form.attr("id"),function(a,b){i(b)});c.subscribe("form_error."+b.form.attr("id"),function(){b.showGeneralError()});b.init();var a=spweb.utils.getQueryParameter("prefill-username");a&&(a.length&&isNaN(a))&&b.form.find("#login-username").val(a);c(".js-facebook-login").bind("click.signUp",function(a){a.preventDefault();e.showAjaxSpinner();j.login(function(){window.location.href=
"/login/fb/?forward_url="+encodeURIComponent(f)},function(){e.hideAjaxSpinner();e.showGeneralError()},{scope:"email,publish_actions,user_birthday"})});this.init=Function("")};g.getForwardUrl=function(){return f};g.setForwardUrl=function(a){f=a};return g}(jQuery,spweb.Form,spweb.fb);

spweb.Media=function(){this._defaultCloudfrontUrl="//d2us6zencw9qvn.cloudfront.net/video-splash/";this._defaultDirectUrl="//s3.amazonaws.com/aro.spotify/video-splash/"};
spweb.Media.prototype._scale=function(b,c,d,a){var e=c/d,f=a?a.width():spweb.user.isMobile()?$(document).width():$(window).width(),a=a?a.height():spweb.user.isMobile()?$(document).height():$(window).height(),g=f/a;e>g?b.height(a).width("auto").removeClass("is-vertical").addClass("is-horizontal").css("marginTop",0).css("marginLeft",-(c/2|0)):e<g?b.width(f).height("auto").removeClass("is-horizontal").css("marginLeft",0).addClass("is-vertical").css("marginTop",-(d/2|0)):b.width("100%").height("auto").removeClass("is-horizontal").removeClass("is-vertical").css("margin",
0)};spweb.Media.prototype.getBaseCdnUrl=function(b){return"chrome"==spweb.user.getBrowser().toLowerCase()?b.directUrl:b.cloudfrontUrl};

spweb.Video=function(a){spweb.Media.call(this);this.video=this.wrapper=null;this.supportedFormats=[{type:"video/mp4",ext:"mp4"},{type:"video/webm",ext:"webm"}];this.options={};this.options.container=null;this.options.videos=["moments1","moments2"];this.options.cloudfrontUrl=this._defaultCloudfrontUrl;this.options.directUrl=this._defaultDirectUrl;jQuery.extend(this.options,a);this.baseUrl=this.getBaseCdnUrl({cloudfrontUrl:this.options.cloudfrontUrl,directUrl:this.options.directUrl})};
spweb.utils.inherit(spweb.Video,spweb.Media);spweb.Video.prototype.scale=function(a){var c=a.width()||a.prop("videoWidth"),e=a.height()||a.prop("videoHeight");this._scale(a,c,e,this.options.container)};
spweb.Video.prototype.init=function(){var a=this;this.wrapper=$("<div />",{id:"video-main","class":"video-main"});spweb.utils.shuffle(this.options.videos);this.video=this.createVideoElement(0);this.wrapper.append(this.video);this.scale(this.video);this.options.container?this.options.container.prepend(this.wrapper):$("body").prepend(this.wrapper);$(window).resize(function(){a.scale(a.video)}).trigger("resize")};
spweb.Video.prototype.createVideoElement=function(a){var c=this,e=[],d,b=$("<video />",{id:"video-moment-"+a,preload:"auto",autoplay:!1,muted:!0,loop:"loop",canplay:!1}).hide();for(d=this.supportedFormats.length-1;0<=d;d--)e.push($("<source />",{src:this.getVideoUrl(a,this.supportedFormats[d].ext),type:this.supportedFormats[d].type}));b.append(e);b.bind("canplaythrough",function(a){b.unbind(a.type);b.prop("canplay",!0);b.trigger("play")});b.bind("play",function(a){b.unbind(a.type);!0!==b.prop("canplay")?
(a.preventDefault(),a.stopPropagation()):c.options.audio&&c.options.audio.initiatedPromise.resolve();b.fadeIn(1E3)});b.bind("loadedmetadata",function(a){b.unbind(a.type);c.scale(b)});this.scale(b);return b};spweb.Video.prototype.getVideoUrl=function(a,c){return this.baseUrl+c+"/long/"+this.options.videos[a]+"."+c};

spweb.Audio=function(a){spweb.Media.call(this);this.audio=null;this.initiatedPromise=$.Deferred();this.isInitiated=!1;this.supportedFormats=[{type:"audio/ogg",ext:"ogg"},{type:"audio/mpeg",ext:"mp3"}];this.options={};this.options.files=["however_many_takes_it_takes"];this.options.cloudfrontUrl=this._defaultCloudfrontUrl;this.options.directUrl=this._defaultDirectUrl;this.options.autoplayAudio=!1;this.options.fadeAudio=!1;this.options.fadeDuration=7;this.options.audioControls=$("#js-audio-control");
jQuery.extend(this.options,a);this.baseUrl=this.getBaseCdnUrl({cloudfrontUrl:this.options.cloudfrontUrl,directUrl:this.options.directUrl})};spweb.utils.inherit(spweb.Audio,spweb.Media);spweb.Audio.prototype.init=function(){var a=this;this._initControls();this._initAutoplay();this.isInitiated=!0;this.initiatedPromise.done(function(){a.enable()})};
spweb.Audio.prototype._initControls=function(){var a=this;this.options.audioControls.click(function(){var b=$(this);b.hasClass("audio-off")?a.getAudioElement().trigger("play"):b.hasClass("audio-on")&&a.getAudioElement().trigger("pause");b.toggleClass("audio-on audio-off")})};
spweb.Audio.prototype._initAutoplay=function(){var a=this;this.options.autoplayAudio&&(this.options.audioControls.trigger("click"),this.options.fadeAudio&&this.getAudioElement().bind("timeupdate",function(){a.audio.prop("currentTime")>a.options.fadeDuration?a.audio.unbind("timeupdate"):a.audio.prop("volume",a.audio.prop("currentTime")/a.options.fadeDuration)}))};spweb.Audio.prototype.enable=function(){!0===this.isInitiated&&this.options.audioControls.show();return this};
spweb.Audio.prototype.getAudioElement=function(){if(null!==this.audio)return this.audio;spweb.utils.shuffle(this.options.files);return this.audio=this.createAudioElement(0)};
spweb.Audio.prototype.createAudioElement=function(a){var b=[],d,c=$("<audio />",{autoplay:!1,loop:"loop",preload:"auto",allowplay:!1}).hide();for(d=this.supportedFormats.length-1;0<=d;d--)b.push($("<source />",{src:this.getAudioUrl(a,this.supportedFormats[d].ext),type:this.supportedFormats[d].type}));c.append(b);c.bind("canplaythrough",function(a){c.unbind(a.type);c.prop("allowplay",!0);c.trigger("play")});c.bind("play",function(a){c.prop("allowplay")||(a.preventDefault(),a.stopPropagation())});return c};
spweb.Audio.prototype.getAudioUrl=function(a,b){return this.baseUrl+"audio/"+b+"/"+this.options.files[a]+"."+b};

spweb.Slideshow=function(a){spweb.Media.call(this);this.collection=null;this.fadeTime=1500;this.slideTime=3E3;this.bufferLimit=2;this.wrapper=this.playInterval=null;this.options={};this.options.pictures="BA_LA_girlinla BA_LA_runner ER_IN_gopromc ER_IN_palms TIM_DE_runnerinforest BA_LA_jellyfish ER_IN_couplemotorcycle ER_IN_goprowaterfall JR_NY_coupleinbed TIM_DE_train BA_LA_nightonbeach ER_IN_flareparasol ER_IN_hammoc JR_NY_window TIM_car_ride_bridge BA_LA_pool ER_IN_girllostintranslation ER_IN_hitchhiking TIM_DE_runnerincity".split(" ");
this.options.baseUrl=this._defaultCloudfrontUrl;jQuery.extend(this.options,a)};spweb.utils.inherit(spweb.Slideshow,spweb.Media);spweb.Slideshow.prototype.scale=function(a){var b=0<parseInt(a.width())?a.width():a.prop("width"),c=0<parseInt(a.height())?a.height():a.prop("height");this._scale(a,b,c)};spweb.Slideshow.prototype.scaleMultiple=function(a){for(var b=0;b<a.elements.length;b++)this.scale(a.getElementByKey(b))};
spweb.Slideshow.prototype.init=function(){var a=this,b,c;this.collection=new spweb.ElementCollection;this.wrapper=$("<div />",{id:"img-main","class":"img-main"});spweb.utils.shuffle(this.options.pictures);c=this.options.pictures.length-1-this.bufferLimit;for(b=this.options.pictures.length-1;b>=c;b--)this.collection.add(this.createPictureElement(b));$("body").prepend(this.wrapper);this.scale(this.collection.getCurrentElement());this.collection.getCurrentElement().show();this.scale(this.collection.getCurrentElement());
setTimeout(function(){a.play()},this.slideTime);$(window).resize(function(){spweb.user.isMobile()&&$("body").height($(document).height());a.scaleMultiple(a.collection)});$(window).bind("orientationchange",function(){spweb.user.isMobile()&&$("body").height($(document).height());a.scaleMultiple(a.collection)});this.options.audio&&this.options.audio.initiatedPromise.resolve()};
spweb.Slideshow.prototype.play=function(){var a=this,b=this.options.pictures.length-1-this.collection.getNextKey(),c,d;setTimeout(function(){a.play()},this.slideTime);if(this.options.pictures.length!==this.collection.elements.length)for(c=b-1;c>=b-this.bufferLimit;c--)d=this.options.pictures.length-1-c,this.collection.isKeyInCollection(d)||this.collection.add(this.createPictureElement(c));this.scale(this.collection.getNextElement());this.collection.getCurrentElement().fadeOut(this.fadeTime);this.collection.getNextElement().fadeIn(this.fadeTime);
this.collection.incrementKey()};spweb.Slideshow.prototype.getPictureUrl=function(a){var b=this.options.baseUrl+"posters/";return spweb.user.isMobile()?b+"mobile/"+this.options.pictures[a]+"-mobile.jpg":b+this.options.pictures[a]+".jpg"};
spweb.Slideshow.prototype.createPictureElement=function(a){a=$("<img />",{id:"img-moment-"+a,"class":"slide-picture",src:this.getPictureUrl(a)}).hide();spweb.user.isMobile()?a.prop("height",720).prop("width",1280).height(720).width(1280):a.prop("height",1080).prop("width",1920).height(1080).width(1920);this.wrapper.append(a);this.scale(a);return a};

spweb.waitingList=function(a,g){function f(c,b){c?(a("#email-success").html(b).removeClass("is-hidden"),a("#email-error").html("").addClass("is-hidden")):(a("#email-error").html(b).removeClass("is-hidden"),a("#email-success").addClass("is-hidden"))}function d(c){var b;null!=c&&(b=a("#waiting-list-form").data(c));return b}function h(a){var b="",e="ok"===a.status,b=e?d("success"):d(a.code)||d("error");f(e,b)}return{init:function(){function c(b,c){f(!1,b+" "+a("<span/>").text(c).html())}var b=this;a("#waiting-list-form #signup").on("click",
function(b){b.preventDefault();a("#waiting-list-form").submit()});a("#waiting-list-form").submit(function(){var c=a("#waiting-list-form #email").attr("value");b.submitAddToWaitingList(c);return!1});a(".link-sign-up-with-facebook").bind("click.signUp",function(e){e.preventDefault();var d=a("#waiting-list-form").data("error-facebook");spweb.fb.login(function(a){a.authResponse?spweb.fb.api.api("/me",function(a){a&&a.email?b.submitAddToWaitingList(a.email):c(d+" NO_EMAIL_IN_RESP")}):c(d+" NO_AUTH_RESPONSE")},
function(a){c(d,a.status)},{scope:"email"})})},submitAddToWaitingList:function(c){a.ajax({type:"GET",dataType:"json",url:"/"+g.getMarket()+"/xhr/json/add-to-waiting-list.php",data:{email:c},success:h})}}}(jQuery,spweb.user);

spweb.passwordChange=function(a,f){var b,d,e={};d=function(c){null!==c&&"object"===typeof c?!1===c.error?(a("#js-password-form, #js-contact-support").hide(),a("#js-password-updated").fadeIn().removeClass("is-hidden"),a("#js-free-trial-banner").fadeIn().removeClass("is-hidden")):b.showGeneralError(c.msg):b.showGeneralError()};e.init=function(){b=new f(a("#js-password-change-form"));a.subscribe("form_success."+b.form.attr("id"),function(b,a){d(a)});a.subscribe("form_error."+b.form.attr("id"),function(){b.showGeneralError()});
b.init();this.init=Function("")};return e}(jQuery,spweb.Form);

spweb.passwordReset=function(a,f){var b,d,e={};d=function(c){"object"===typeof c&&""!==c.msg?!1===c.error?(a(".password-reset .msg").text(c.msg),a("#js-password-reset-form, .password-reset p").hide(),a(".password-reset .msg").fadeIn()):b.showGeneralError(c.msg):b.showGeneralError()};e.init=function(){b=new f(a("#js-password-reset-form"));a.subscribe("form_success."+b.form.attr("id"),function(b,a){d(a)});a.subscribe("form_error."+b.form.attr("id"),function(){b.showGeneralError()});b.init();this.init=
Function("")};return e}(jQuery,spweb.Form);

spweb.signUp=function(b,i,j,r,f){var h,c,g={useOverlay:!1},d,k,l,m,n,p,q,e={};k=function(){g.useOverlay&&(c.delegate("*","click.signUp",function(a){a.stopImmediatePropagation()}).bind("click.signUp",d.hideModule),b(document).keyup(function(a){27==a.which&&d.hideModule()}))};l=function(){b(".js-open-signup").on("click.signUp",function(a){a.preventDefault();var a=b(this),c=a.attr("href"),e=a.data("creation-flow");f.setForwardUrl(c);j.setForwardUrl(c);f.setCreationFlow(e);d.goToSection(a.data("signup-start-section"),
!0);d.showModule()})};m=function(){h=b(".sign-up.module");c=b("<div></div>").addClass("sign-up-overlay")};n=function(){h.find(".js-link").on("click.signUp",function(a){a.preventDefault();a.stopPropagation();d.goToSection(b(this).attr("data-section"))})};p=function(){g.useOverlay&&c.prependTo("body").append(h)};q=function(){0<b(".no-backgroundsize").length&&"undefined"!==typeof b.backstretch&&(b(".sign-up .spotify-logo").backstretch(i.getStaticUrl()+"/i/_global/logos/spotify-logo-stack-80x104@2x.png"),
b(".sign-up .icon-fb").backstretch(i.getStaticUrl()+"/i/_global/icons/icon-fb.png"))};e.init=function(a){d=this;b.extend(g,a);f.init();j.init();r.init();m();p();l();k();n();q();this.init=function(){}};e.showModule=function(){c.fadeIn()};e.hideModule=function(){c.fadeOut()};e.goToSection=function(a,c){if(a=a||g.startSection)d.useOverlay&&b(".sign-up-overlay:hidden").show(),b(".sign-up section.show").hasClass(a)||("register"===a&&f.copyTermsField(),b(".sign-up section.show").slideUp(c?0:null).removeClass("show"),
b(".sign-up section."+a+":hidden").slideDown(c?0:null).addClass("show"))};return e}(jQuery,spweb.environment,spweb.login,spweb.passwordReset,spweb.register);

spweb.home=function(a,h,f){var g;g=function(){var c=a("#js-header-main"),c={center:!0,windowClipBy:"fixed"===c.css("position")?c.outerHeight():0};a(".scroller-arrow").spwebScroller(c);a("#js-header-main .nav-link.features, #js-header-main .nav-link.premium").spwebScroller(c);a("#nav-link-features").attr("href","#listen-everywhere");a("#nav-link-premium").attr("href","#section-premium");a("#js-header-main .logo").spwebScroller();a("#intro-premium-button").spwebScroller(c)};return{init:function(){g();
a(window).on("resize.scroller",g);var c=f.isMobilePage();if(!c){var b=function(){a(".section-auto-size").each(function(){var b=a(this),c=a(window).height()*parseFloat(b.data("auto-size"));b.css("height",c);var e=b.find(".box").outerHeight();e>c&&b.css("height",e)})};a(window).on("resize",function(){b()});b();a(window).load(function(){b()})}spweb.home.artworkStrip.init(".artwork-strip",spweb.imageStripArtwork.artwork,c?32:64);if(c)a("div.scroller-main").each(function(){var b=a(this);b.addClass("parallax-disabled");
b.css("background-image","url("+b.data("image-mobile")+")");var c=0.5*a(window).height()+(b.data("extra-height-mobile")||0);b.css("height",250>c?250:c)});else if(a.browser.msie||Modernizr.touch){var e=a(window).height(),d=function(b,c){var a=Math.max(0.75*c,200)+(b.data("extra-height")||0);b.css("height",a+"px")};a("div.scroller-main").each(function(){var b=a(this);b.addClass("parallax-disabled");b.css("background-image","url("+b.data("image")+")");d(b,e)});a(window).resize(function(){var b=a(window).height();
a("div.scroller-main").each(function(){var c=a(this);d(c,b)})})}else spweb.parallaxScroller.scroller.init({speed:0.2,items:a("div.scroller-main")});a(window).load(function(){a(".dummy-firstload").hide();a(".content-main").css("visibility","visible")})},artworkStrip:{init:function(c,b,e){this.SMALL_TILE_SIZE=e;this.STRIP_OFFSET_TOP=3*e;this.inner=a(c);this.artwork=b;this.artworkCount=Math.floor(Math.random()*this.artwork.length);this.supportedFeatures=f.applyCssGetSupportedFeatures();this.tiles=[];
this.grid=[];this.yPosTop=-2;this.yPosBot=1;this.xPos=0;this.xPosOfNextLargeTile=this.random(0,2);this.lastTopChange=this.lastBotChange=0;this.redrawTiles();var d=this;a(window).resize(function(){d.redrawTiles()});this.init=Function("");return this},redrawTiles:function(){f.applyCss(this.inner[0],this.supportedFeatures,{y:a("#section-soundtrack").offset().top+a("#section-soundtrack").outerHeight()-this.inner.height()/2,width:a(window).width()});var c=Math.floor(a(window).width()/this.SMALL_TILE_SIZE)+
1;c>this.xPos&&this.drawTiles(c)},drawTiles:function(c){for(;this.xPos<c;this.xPos++){if(this.xPosOfNextLargeTile==this.xPos){for(var b=this.xPosOfNextLargeTile,a=this.random(-2,0),b=spweb.home.artworkStrip.tile.init(this,b,a,3);!b.unique();)b.x++,this.xPosOfNextLargeTile++;b.add();this.xPosOfNextLargeTile+=this.random(5,8)}for(b=this.yPosTop;b<this.yPosBot;b++)if(this.isEmpty(this.xPos,b)){var a=1,d=b<this.yPosBot-1;0.8>Math.random()&&d&&(a=2);a=spweb.home.artworkStrip.tile.init(this,this.xPos,b,
a);a.unique()||(a=spweb.home.artworkStrip.tile.init(this,this.xPos,b,1));a.add()}if(-1==this.lastTopChange)this.lastTopChange=0;else{do b=this.random(-1,1),d=this.yPosTop+b,a=this.yPosBot-d;while(-4>d||-1<d||3>a||4<a);this.yPosTop=d;this.lastTopChange=b}if(1==this.lastBotChange)this.lastBotChange=0;else{do b=this.random(-1,1),d=this.yPosBot+b,a=d-this.yPosTop;while(4<d||1>d||3>a||4<a);this.yPosBot=d;this.lastBotChange=b}}},random:function(a,b){if(a>b)var e=a,a=b,b=e;return Math.floor(Math.random()*
(b-a+1))+a},isEmpty:function(a,b){return null==this.grid[a]||null==this.grid[a][b]},isColumnFull:function(a,b,e){if(null==this.grid[a])return!1;for(;b<e;b++)if(null==this.grid[a][b])return!1;return!0},tile:{init:function(a,b,e,d){this.strip=a;this.x=b;this.y=e;this.size=d;return this},unique:function(){for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)if(!this.strip.isEmpty(this.x+a,this.y+b))return!1;return!0},add:function(){this.strip.tiles.push(this);for(var a=0;a<this.size;a++)for(var b=
0;b<this.size;b++){var e=this.x+a,d=this.y+b;null==this.strip.grid[e]&&(this.strip.grid[e]={});this.strip.grid[e][d]=this}this.draw()},draw:function(){this.div=a("<div />");this.div.addClass("artwork-strip-tile");this.strip.artworkCount+=5;this.strip.artworkCount>=this.strip.artwork.length&&(this.strip.artworkCount=0);f.applyCss(this.div[0],this.strip.supportedFeatures,{x:this.strip.SMALL_TILE_SIZE*this.x,y:this.strip.SMALL_TILE_SIZE*this.y+this.strip.STRIP_OFFSET_TOP,width:this.strip.SMALL_TILE_SIZE*
this.size,height:this.strip.SMALL_TILE_SIZE*this.size,backgroundImageUrl:"//d2us6zencw9qvn.cloudfront.net/website_reboot_assets/image_strip_"+(64==this.strip.SMALL_TILE_SIZE||32==this.strip.SMALL_TILE_SIZE?"2":"3")+"/"+this.strip.SMALL_TILE_SIZE*this.size+"/"+this.strip.artwork[this.strip.artworkCount]+".jpg"});this.strip.inner.append(this.div)}}}}}(jQuery,spweb.user,spweb.ui);

spweb.download=function(e,i,c,f,g){return{init:function(){var a=this;e(window).load(function(){a.triggerDownload()});this.removeTrackingPixel()},removeTrackingPixel:function(){i.remove("pxt")},getDownloadLink:function(){var a=e("body");return a.hasClass("page-download-mac")?/mac os x 10[._]5/.test(window.navigator.userAgent.toLowerCase())?c.mac_osx_10_5:c.mac:a.hasClass("page-download-windows")?c.windows:!1},getDownloadPageURI:function(a){var b=window.location.hostname,c=f.getMarket(),e=f.getLang(),
h=f.getOs(),d="",d=a?a.match(/\?.*$/)||"":window.location.search,a="google"===g.getQueryParameter("utm_source",d)&&"growth_paid"===g.getQueryParameter("utm_medium",d);switch(h){case "mac":case "windows":b="//"+b+"/"+c+"/download/"+h+"/"+d;break;case "iphone/ipod":case "ipad":b=a?"http://hastrk2.com/serve?action=click&publisher_id=22322&site_id=6022&offer_id=255078&sub_campaign=appstoreredirect":"http://itunes.apple.com/app/spotify/id324684580?l="+e+"&mt=8";break;case "android":b=a?"http://hastrk2.com/serve?action=click&publisher_id=22322&site_id=11556&offer_id=246364&sub_campaign=appstoreredirect":
"https://play.google.com/store/apps/details?id=com.spotify.mobile.android.ui";break;case "windows phone":b="http://www.windowsphone.com/en-gb/store/app/spotify/10f2995d-1f82-4203-b7fa-46ddbd07a6e6";break;default:b="//"+b+"/"+c+"/download/other/"+d}return b},redirectToDownloadPage:function(){window.location.href=this.getDownloadPageURI()},triggerDownload:function(){var a=this.getDownloadLink();a&&setTimeout(function(){window.location.href=a;return!1},100)}}}(jQuery,spweb.cookie,spweb.config.downloadLinks,
spweb.user,spweb.utils);

spweb.analytics=function(c,f,g,k){var b={},d=null,h,i,j;h=function(){f(".js-ga-event").bind("click",function(){var a=f(this);b.trackEvent(a.data("ga-event-category"),a.data("ga-event-action"),a.data("ga-event-label"))})};i=function(){var a,e=window.location.href.split("/");e.splice(0,3);a=e.splice(0,1).toString();e="/"+e.join("/");c._gaq=[];c._gaq.push(["_setAccount",b.getTrackingId()]);c._gaq.push(["_trackPageview",e]);c._gaq.push(["_setCustomVar",5,"Market",a]);k.asyncLoadJs("https://ssl.google-analytics.com/ga.js")};
j=function(a){c._gaq.push(["_trackPageview",a])};b.init=function(){if(!1===g.enable)return!1;i();h()};b.getTrackingId=function(){null===d&&(d=g.trackingId);return d};b.trackEvent=function(a,b,d){a=["_trackEvent",a,b];"string"===typeof d&&a.push(d);c._gaq.push(a)};b.trackPageview=function(a){j(a)};return b}(this,jQuery,spweb.config.ga,spweb.utils);

spweb.tracking=function(b,c){var a={pushGTMEvent:function(a){b.dataLayer.push({event:a})}};c.subscribe("registration_success",function(){a.pushGTMEvent("registration_success")});return a}(this,jQuery);

spweb.forMusic=function(c,a,d,e,f){var b={init:function(){b.video=new e;b.fallback=new f;a.user.isMobile()&&c("body").height(c(document).height());a.user.isiOS()&&setTimeout(function(){0===window.pageYOffset&&window.scrollTo(0,window.pageYOffset+1)},1E3);setTimeout(function(){d.supportsVideo()?a.forMusic.video.init():a.forMusic.fallback.init()},1)}};return b}(jQuery,spweb,spweb.user,spweb.Video,spweb.Slideshow);

spweb.webplayer=function(d,f,i,b,n,l){var m=["int"],g,h=null,c=null,j,e,k,b={};j=function(){var a;a=l.random();var c=spweb.webplayer,b=c.getWebplayerOption();0!==d(".reboot.is-loggedout").length&&isNaN(b)&&(0.9>a?(b=3,a="option_v2"):(b=4,a="default_v2"),c.setWebplayerOption(b),e("WebPlayerOptionAbTest",{group:a,step:"landing"}))};e=function(a,b){d.ajax({type:"POST",url:"/"+g+"/xhr/json/tracking.php",data:{event:a,params:JSON.stringify(b)}})};k=function(){var a=spweb.webplayer.getWebplayerOption();
if(!isNaN(a))switch(a){case 4:d(".js-get-spotify").data("creation-flow","default_v2__get_spotify").on("click",function(){e("WebPlayerOptionAbTest",{group:"default_v2",step:"click_get_spotify"})});d(".js-use-web-player-container").hide();break;case 3:d(".js-get-spotify").data("creation-flow","option_v2__get_spotify").on("click",function(){e("WebPlayerOptionAbTest",{group:"option_v2",step:"click_get_spotify"})}),d(".js-use-web-player-container").css({display:"block",visibility:"visible"}),d(".js-use-web-player").data("creation-flow",
"option_v2__use_web_player").on("click",function(){e("WebPlayerOptionAbTest",{group:"option_v2",step:"click_use_web_player"})})}};b.getWebplayerOption=function(){if(null===c&&(c=parseInt(i.get("webplayer_option"),10),1===c||2===c||0===c))c=NaN;return c};b.setWebplayerOption=function(a){i.set({name:"webplayer_option",value:a});c=a};b.getSupportsWebPlayer=function(){null===h&&(h="Explorer"===f.getBrowser()&&9>f.getBrowserVersion()?!1:!0);return h};b.init=function(){g=f.getMarket();!this.inExcludedMarket(g)&&
this.getSupportsWebPlayer()&&(j(),k())};b.inExcludedMarket=function(a){return-1<d.inArray(a,m)};return b}(jQuery,spweb.user,spweb.cookie,spweb.ui.nav,spweb.register,this.Math);

$(function(){var b=spweb.user.isMobile(),a=$("body"),c;spweb.ui.init();0<$("#js-market-picker").length&&spweb.marketpicker.init();b&&a.addClass("is-mobile");$("html").hasClass("layout-landing-signup")&&(spweb.signUp.init({useOverlay:!1}),c=$("body").hasClass("page-prelaunch")?"register":"signup-select",spweb.signUp.goToSection(c,!0));a.hasClass("page-homepage")&&spweb.home.init();(a.hasClass("page-download-mac")||a.hasClass("page-download-windows"))&&spweb.download.init();a.hasClass("page-download-redirect")&&
spweb.download.redirectToDownloadPage();a.hasClass("page-for-music")&&spweb.forMusic.init();a.hasClass("page-video-splash")&&spweb.utils.asyncLoadJs(spweb.environment.getStaticUrl()+"/js/video-splash.js");a.hasClass("page-password-change")&&spweb.passwordChange.init();a.hasClass("page-why-not-available")&&spweb.waitingList.init();"int"!==spweb.user.getMarket()&&(!b&&0<$(".reboot.is-loggedout").length)&&(spweb.webplayer.init(),spweb.signUp.init({useOverlay:!0}));0<$(".page-signup, .page-login, .page-service-login, .page-password-reset").length&&
spweb.signUp.init();spweb.analytics.init()}());

spweb.payment=spweb.payment||{};
(function(){_facebookRefreshSubscription=function(a){redirectPath="/"+spweb.signUp.getMarket()+"/account/subscription/";$.ajax({type:"POST",data:"subId="+a,url:"/"+spweb.signUp.getMarket()+"/xhr/json/facebooksubscription.php",error:function(){window.location.href=redirectPath}}).done(function(){window.location.href=redirectPath})};spweb.payment.facebookCancel=function(a){"undefined"!=typeof a&&FB.ui({method:"pay",action:"cancel_subscription",subscription_id:a},function(b){b&&b.subscription_id&&_facebookRefreshSubscription(a)})};
spweb.payment.facebookReactivate=function(a){"undefined"!=typeof a&&FB.ui({method:"pay",action:"reactivate_subscription",subscription_id:a},function(b){b&&b.subscription_id&&_facebookRefreshSubscription(a)})};spweb.payment.facebookModify=function(a){"undefined"!=typeof a&&FB.ui({method:"pay",action:"modify_subscription",subscription_id:a},function(){})};spweb.payment.facebookBuy=function(a,b,c,d){"undefined"!=typeof a&&"string"==typeof b&&""!=b?FB.ui({method:"pay",action:"create_subscription",product:a,
app_param_data:b},function(a){a=a||[];window.location=c+"/get-spotify/go/pay/response.php?pp=facebooksubscription&slug="+d+"&onr="+b+"&subscription_id="+(a.subscription_id||"")+"&status="+(a.status||"")+"&error_code="+(a.error_code||"")+"&error_message="+(a.error_message||"")}):window.location=c+"/get-spotify/go/fail"}})();

(function(){function a(a){a?($(".notifications-radio-enabled").attr("disabled",!0),$(".notifications-label").fadeTo(0,0.5)):($(".notifications-radio-enabled").attr("disabled",!1),$(".notifications-label").fadeTo(0,1))}$("#disable-notifications").is(":checked")&&a(!0);$("#disable-notifications").click(function(){a(this.checked)})})();
